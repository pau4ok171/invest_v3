@use '../../styles/settings';
@use '../../styles/tools';
@use '../../components/BaseTable/variables' as *;
@use './variables' as *;
@use '../BaseTable/variables' as BaseTable;

@include tools.layer('components') {
  .base-data-table {
    width: 100%;
  }
  .base-data-table__table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
  }
  .base-data-table__tr {
    &--focus {
      border: 1px dotted black;
    }
    &--clickable {
      cursor: pointer;
    }
  }
  .base-data-table {
    .base-table__wrapper {
      > table {
        > thead,
        > tbody {
          > tr {
            > td,
            > th {
              &.base-data-table-column--align-end {
                text-align: end;

                .base-data-table-header__content {
                  flex-direction: row-reverse;
                }
              }
              &.base-data-table-column--align-center {
                text-align: center;

                .base-data-table-header__content {
                  justify-content: center;
                }
              }
              &.base-data-table-column--no-padding {
                padding: 0 8px;
              }
              &.base-data-table-column--nowrap {
                text-overflow: ellipsis;
                text-wrap: nowrap;
                overflow: hidden;

                & .base-data-table-header__content {
                  display: contents;
                }
              }
            }
            > th {
              align-items: center;
            }
            > th.base-data-table__th--fixed {
              position: sticky;
            }
            > th.base-data-table__th--sortable:hover {
              cursor: pointer;
              color: rgba(var(--base-theme-on-surface), var(--base-high-emphasis-opacity));
            }
            > th:not(.base-data-table__th--sorted) {
              .base-data-table-header__sort-icon {
                opacity: 0;
              }
              &:hover {
                .base-data-table-header__sort-icon {
                  opacity: .5;
                }
              }
            }
            &.base-data-table__tr--mobile {
              > td {
                height: fit-content;
              }
            }
          }
        }
      }
    }
  }
  .base-data-table-column--fixed,
  .base-data-table__th--sticky {
    background: $table-background;
    position: sticky !important;
    left: 0;
    z-index: 1;
  }
  .base-data-table-column--last-fixed {
    border-right: 1px solid rgba(var(--base-border-color), var(--base-border-opacity));
  }
  .base-data-table.base-table--fixed-header > .base-table__wrapper > table > thead > tr > th.base-data-table-column--fixed {
    z-index: 2;
  }
  .base-data-table-group-header-row {
    td {
      background: rgba(var(--base-theme-surface));
      color: rgba(var(--base-theme-on-surface));

      > span {
        padding-left: 5px;
      }
    }
  }
  .base-data-table--loading {
    .base-data-table__td {
      opacity: $data-table-loading-opacity;
    }
  }
  .base-data-table-group-header-row__column {
    padding-left: calc(var(--base-data-table-group-header-row-depth) * 16px) !important;
  }
  .base-data-table-header__content {
    display: flex;
    align-items: center;
  }
  .base-data-table-header__sort-badge {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    font-size: .875rem;
    padding: 4px;
    border-radius: 50%;
    background: $data-table-header-sort-badge-color;
    min-width: $data-table-header-sort-badge-size;
    min-height: $data-table-header-sort-badge-size;
    width: $data-table-header-sort-badge-size;
    height: $data-table-header-sort-badge-size;
  }
  .base-data-table-progress {
    > th {
      border: none !important;
      height: auto !important;
      padding: 0 !important;
    }
  }
  .base-data-table-progress__loader {
    position: relative;
  }
  .base-data-table-rows-loading,
  .base-data-table-rows-no-data {
    text-align: center;
  }
  .base-data-table__tr--mobile {
    > .base-data-table__td--expanded-row {
      grid-template-columns: 0;
      justify-content: center;
    }
    > .base-data-table__td--select-row {
      grid-template-columns: 0;
      justify-content: end;
    }
    > td {
      align-items: center;
      column-gap: 4px;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      min-height: var(--base-table-row-height);

      &:not(:last-child) {
        border-bottom: 0 !important;
      }
    }
  }
  .base-data-table__td-title {
    font-weight: BaseTable.$table-header-font-weight;
    text-align: start;
  }
  .base-data-table__td-value {
    text-align: end;
  }
  .base-data-table__td {
    &-sort-icon {
      color: $data-table-header-mobile-chip-icon-color;

      &-active {
        color: $data-table-header-mobile-chip-icon-color-active
      }
    }
  }
}